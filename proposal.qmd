---
title: "STA 210 Project Proposal: A Study of Airfares in the Top 1000 U.S. City-Pair Markets"
author: "Diego Ge"
format: pdf
date: 2026-02-21
---

```{r}
#| label: library-data-import-data-wrangling
#| warning: FALSE
#| message: FALSE
#| echo: FALSE

library(readr)
library(dplyr)
library(ggplot2)
library(tidymodels)
library(skimr)
library(knitr)

airfare <- read_csv("data/airfare.csv")

airfare <- airfare %>% 
  filter(
    Year == 2024 | Year == 2019,
    quarter == 3
  ) %>% 
  mutate(
    fare = parse_number(fare),
    fare_lg = parse_number(fare_lg),
    fare_low = parse_number(fare_low),
    timeframe = as.factor(case_when(
      Year == 2019 ~ "2019Q3",
      Year == 2024 ~ "2024Q3",
      TRUE ~ NA
    ))
  ) %>% 
  select(
    city1, city2, nsmiles, passengers, fare, carrier_lg, large_ms, fare_lg, 
    carrier_low, lf_ms, fare_low, timeframe
  ) %>% 
  # Carrier type determination explained in code book. See data/README.md
  mutate(
    carrier_lg_type = as.factor(case_when(
      carrier_lg %in% c("DL", "UA", "AS", "AA") ~ "fullservice",
      carrier_lg %in% c("B6", "WN", "MX") ~ "lcc",
      carrier_lg %in% c("F9", "XP", "G4", "NK", "SY") ~ "ulcc",
      TRUE ~ NA
    )),
    carrier_low_type = as.factor(case_when(
      carrier_low %in% c("DL", "UA", "AS", "AA", "HA") ~ "fullservice",
      carrier_low %in% c("B6", "WN", "MX") ~ "lcc",
      carrier_low %in% c("F9", "XP", "G4", "NK", "SY") ~ "ulcc",
      TRUE ~ NA
    ))
  ) %>% 
  # Inflation adjusting for 2019 prices to match with 2024 prices. 
  # Multiplier of 1.228 sourced from Bureau of Labor Statistics.
  mutate(
    fare_adj = case_when(
      timeframe == "2024Q3" ~ fare,
      timeframe == "2019Q3" ~ fare * 1.228,
      TRUE ~ NA
    ),
    fare_lg_adj = case_when(
      timeframe == "2024Q3" ~ fare_lg,
      timeframe == "2019Q3" ~ fare_lg * 1.228,
      TRUE ~ NA
    ),
    fare_low_adj = case_when(
      timeframe == "2024Q3" ~ fare_low,
      timeframe == "2019Q3" ~ fare_low * 1.228,
      TRUE ~ NA
    )
  ) %>% 
  mutate(
    fare_adj_per_mile = fare_adj / nsmiles,
    fare_lg_adj_per_mile = fare_lg_adj / nsmiles,
    fare_low_adj_per_mile = fare_low_adj / nsmiles
  ) %>% 
  mutate(
    distance_group = factor(case_when(
      nsmiles <= 500 ~ "<500",
      nsmiles > 500  & nsmiles <= 1000 ~ "501–1000",
      nsmiles > 1000 & nsmiles <= 1500 ~ "1001–1500",
      nsmiles > 1500 & nsmiles <= 2000 ~ "1501–2000",
      nsmiles > 2000 & nsmiles <= 2500 ~ "2001–2500",
      nsmiles > 2500 ~ "2500+"),
      levels = c(
        "<500",
        "501–1000",
        "1001–1500",
        "1501–2000",
        "2001–2500",
        "2500+"
      )
  ))

```

# Section 1: Introduction

What determines how much you pay for a plane ticket? When we drive from Point A to Point B, calculating cost is relatively straightforward: adding the depreciation value of the vehicle, the time-value of the drive time, and the cost of gas gives us a basically accurate estimate of how much the trip will cost in a car. Airfares, however, can vary wildly and independent from the distance traveled. 

For instance, one can fly from New Haven, CT to Tampa, FL for a distance of 1067 miles for just an average fare of 103 US Dollars (in Q4, 2024 - see `data/airfare.csv`), while a flight of 226 miles from Atlanta, GA to Charlotte, NC has an average fare of 309.22 US Dollars in Q4, 2024.

One explanation of this disparity in pricing is that on routes with little to no competitions, individual airlines are able to inflate  pricing for nonstop flights without a significant drop in demand. As there are significant capital costs and slot constraints to opening new flight routes, it can be difficult to introduce more competition to particular routes with relatively lower demand. Testing this hypothesis, Brueckner et al. 2013, using the adjacent-airport approach, shows that while low-cost carrier competition can create dramatic fare impacts, competition between legacy carriers have limited impacts on airfares.

![Airfares for Raleigh-Durham to New York City flights on Mar 4, 2026, accessed Feb 21, 2026](figures-and-media/rdu-nyc-fare-illustration.png)

In this analysis, I ask two questions:

1. How have airfare pricing in U.S. domestic flights changed between 2019 and 2024?
2. What factors predict average fares in U.S. domestic flights?

# Section 2: Data Description



# Section 3: Data Processing

- Inflation adjusting for 2019 and 2024
  - https://www.bls.gov/data/inflation_calculator.htm CPI calculator, 100 USD in Sep 2019 = 122.8 USD in Sep 2024
- Adding categorical variable for type of carrier

```{r}
#| label: response-var-summary-stat
#| echo: FALSE
#| warning: FALSE
#| message: FALSE

# Aggregate

airfare %>% 
  skim(fare_adj) %>% 
  select(-skim_variable, -skim_type, -n_missing, 
         -complete_rate, -numeric.hist) %>% 
  kable(digits = 2, 
        caption = "Airfare for Top 1,000 City Market Pairs in 
        the Contiguous United States (Inflation-Adjusted 2024 USD)",
        col.names = c("Mean", "SD", "Min", "P25", "Median", "P75", "Max"))

airfare %>%
  group_by(timeframe) %>%
  skim(fare_adj) %>% 
  select(-skim_variable, -skim_type, -n_missing, 
         -complete_rate, -numeric.hist) %>% 
  kable(digits = 2,
        caption = "Airfare for Top 1,000 City Market Pairs in 
        the Contiguous United States by timeframe 
        (Inflation-Adjusted 2024 USD)",
        col.names = c("Timeframe", "Mean", "SD", "Min", 
                      "P25", "Median", "P75", "Max"))

airfare %>%
  group_by(distance_group) %>%
  skim(fare_adj) %>% 
  select(-skim_variable, -skim_type, -n_missing, 
         -complete_rate, -numeric.hist) %>% 
  kable(digits = 2,
        caption = "Airfare Summary Statistics for Top 1,000 City Market Pairs in 
        the Contiguous United States by distance 
        (Inflation-Adjusted 2024 USD)",
        col.names = c("Distance (miles)", "Mean", "SD", "Min", 
                      "P25", "Median", "P75", "Max"))


```

```{r}
#| label: response-var-visualization-timeframe
#| echo: FALSE
#| warning: FALSE
#| message: FALSE

# Visualizations

airfare %>% ggplot(aes(x = fare_adj, color = timeframe)) +
  geom_density() +
  labs(
    x = "Average Fare (USD, adjusted for inflation)",
    y = "Density",
    title = "Distribution of U.S. domestic airfares for nonstop flights",
    subtitle = "For top 1000 city market pairs within the contiguous 48 states, 
    for 2019 Q3 and 2024 Q3",
    color = "Timeframe"
  ) +
  theme_minimal()

```

```{r}
#| label: response-var-visualization-nsmiles-timeframe
#| echo: FALSE
#| warning: FALSE
#| message: FALSE

airfare %>% ggplot(aes(x = nsmiles, y = fare_adj, color = timeframe)) +
  geom_point(alpha = 0.4) +
  geom_smooth(se = FALSE, method = "lm") +
  labs(
    x = "Nonstop Distance Between City Markets (miles)",
    y = "Average Fare (USD, adjusted for inflation)",
    title = "Distribution of U.S. domestic airfares for nonstop flights",
    color = "Timeframe",
    subtitle = "For top 1000 city market pairs within the contiguous 48 states,
    by nonstop distance, for 2019 Q3 and 2024 Q3"
  ) +
  theme_minimal()

```


```{r}
#| label: visualization-log-fare-per-mile
#| echo: FALSE
#| warning: FALSE
#| message: FALSE

airfare %>% ggplot(aes(x = log(nsmiles), y = log(fare_adj_per_mile), color = timeframe)) +
  geom_point(alpha = 0.4) +
  geom_smooth(se = FALSE, method = "lm") +
  labs(
    title = "Distance Elasticity of U.S. Domestic Airfare",
    subtitle = "For top 1000 city market pairs within the contiguous 48 states 
    in 2019 Q3 and 2024 Q3",
    x = "log(Distance, miles)",
    y = "log(Fare per mile flown, USD/miles)",
    color = "Timeframe"
  ) +
  theme_minimal()
  
```

```{r}
#| label: response-var-visualization-carrier-type
#| echo: FALSE
#| warning: FALSE
#| message: FALSE

airfare %>% ggplot(aes(x = fare_adj, y = timeframe, color = carrier_lg_type)) +
  geom_boxplot() +
  labs(
    x = "Average Fare (USD, adjusted for inflation)",
    y = "",
    color = "Type of Largest Carrier",
    title = "Distribution of U.S. Airfare by Route's Largest Operating Carrier",
    subtitle = "For top 1000 city market pairs within the contiguous 48 states,
    in 2019 Q3 and 2024 Q3"
  ) +
  theme_minimal() +
  scale_color_discrete(labels = c("Full Service", "Low Cost Carrier", 
                                  "Ultra-Low Cost Carrier")) 



```



# Section 4: Analysis Approach


